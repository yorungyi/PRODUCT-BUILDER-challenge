# 노스팜CC 매출 데이터보드 Blueprint

## 1. 프로젝트 개요

노스팜CC 식음료 파트의 일매출을 디지털 방식으로 등록하고, 연도별/분기별/월별 매출 데이터를 시각적으로 분석할 수 있는 대시보드 애플리케이션입니다. 관리자는 매출 마감 및 데이터 수정 권한을 가지며, 모든 변경 사항은 감사 로그에 기록되어 투명성을 확보합니다.

**주요 기능:**
- 일매출 등록 (날짜, 구분, 금액, 메모)
- 일매출 현황 실시간 조회 및 필터링
- 매출 데이터 마감 및 마감 해제 (관리자 권한)
- 연도별 매출 합산 및 상세 내역 조회
- 관리자 인증 및 보안 기능
- **모든 데이터는 Firebase Firestore에 실시간으로 저장 및 동기화**

## 2. 현재 상태 (As-Is & To-Be)

이 문서는 프로젝트의 초기 상태(As-Is)와 현재 구현된 목표 상태(To-Be)를 모두 포함하고 있습니다.

### 2.1. 아키텍처

- **[완료] 구조:** 단일 HTML 파일과 모던 JavaScript(ES Modules)로 분리된 `main.js`, `store.js`, `ui.js` 파일로 구성되어 있습니다.
- **[완료] 데이터:** 모든 핵심 데이터(매출, 마감 정보, 감사 로그)는 **Firebase Firestore** 데이터베이스에 저장됩니다. 데이터는 `onSnapshot` 리스너를 통해 모든 클라이언트에게 실시간으로 동기화됩니다. 관리자 모드 상태는 각 클라이언트의 `localStorage`에 유지됩니다.

### 2.2. 코드 및 스타일

- **[완료] 모던 JavaScript (ES Modules):** 기존의 단일 `app.js` 파일을 기능 단위의 여러 모듈(`main.js`, `store.js`, `ui.js`)로 성공적으로 분리하여 코드의 재사용성과 유지보수성을 크게 향상했습니다.
- **[완료] 스타일:** 일반적인 CSS를 사용하여 전체 스타일이 단일 파일(`styles.css`)에 작성되어 있습니다. CSS 변수, 그림자 효과, 타이포그래피 개선 등 모던 CSS 기법을 도입하여 디자인을 개선했습니다.

### 2.3. UI (User Interface)

- **[완료] 디자인 시스템:** `styles.css`에 CSS 변수를 기반으로 한 색상, 타이포그래피, 그림자 등 새로운 디자인 시스템을 적용했습니다. `index.html`의 구조와 클래스를 개선하여 시각적 완성도를 높였습니다.
- **[진행 전] 웹 컴포넌트:** 현재는 표준 HTML 태그로 UI가 구성되어 있습니다. 재사용성과 캡슐화를 위해 버튼, 카드, 테이블 등의 UI 요소를 웹 컴포넌트(Web Components)로 점진적으로 전환할 계획입니다.

---

## 3. 완료된 개선 사항

### 3.1. 코드 모듈화 (ES Modules) 도입

- **결과:** `app.js` 파일을 `main.js`(시작점), `store.js`(데이터 로직), `ui.js`(UI 렌더링)로 완벽히 분리했습니다. `index.html`은 `main.js`를 `type="module"`로 불러옵니다.

### 3.2. Firebase 연동 및 데이터베이스 이전

- **결과:** `LocalStorage` 기반의 데이터 저장 방식을 **Firebase Firestore**로 성공적으로 전환했습니다.
    - **Firebase 초기화:** `firebase-config.js` 설정 파일을 통해 Firebase 앱을 초기화하고 Firestore DB에 연결했습니다.
    - **실시간 데이터 동기화:** `store.js`에 `onSnapshot` 리스너를 구현하여, Firestore의 `sales`, `closedDates`, `audit` 컬렉션에 변경이 발생하면 모든 클라이언트의 화면이 자동으로 새로고침됩니다.
    - **데이터 관리:** 매출 등록(`addDoc`), 마감 처리(`writeBatch`), 삭제(`deleteDoc`) 등 모든 데이터 조작이 Firestore API를 통해 비동기적으로 안전하게 처리됩니다.

### 3.3. 디자인 시스템 개선

- **결과:** `styles.css`를 업데이트하여 모던하고 전문적인 디자인 시스템을 적용했습니다.
    - **CSS 변수:** 색상, 그림자, 폰트 등을 변수화하여 유지보수성을 높였습니다.
    - **시각적 개선:** `Poppins` 폰트를 도입하고, 카드, 버튼, 테이블 등 주요 UI 요소의 스타일을 개선하여 사용자 경험을 향상했습니다.
    - **구조 개선:** `index.html`의 구조와 클래스를 새로운 디자인 시스템에 맞게 조정했습니다.

## 4. 향후 개선 계획 (Next Steps)

- **웹 컴포넌트(Web Components) 기반의 UI 개편:**
    - **컴포넌트 식별 및 구현:** 현재 UI를 분석하여 재사용 가능한 컴포넌트(예: 카드, 버튼, 입력 필드, 테이블)를 Custom Element와 Shadow DOM을 사용하여 구현합니다.
    - **기존 UI 교체:** `index.html`의 기존 마크업을 새로 만든 웹 컴포넌트 태그로 점진적으로 교체합니다.
