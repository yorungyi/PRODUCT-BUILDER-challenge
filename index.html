<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>노스팜CC 매출 데이터보드</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="main.js"></script>
</head>
<body>
    <header class="app-header">
        <div>
            <p class="kicker">North Farm CC F&B</p>
            <h1>매출 데이터보드</h1>
            <p class="subtext">일일 매출을 등록하고 연간 현황을 확인하세요.</p>
        </div>
        <div class="actions">
            <custom-button id="logButton" label="변경 기록 보기" variant="secondary"></custom-button>
            <custom-button id="logoutButton" label="로그아웃" variant="danger"></custom-button>
            <small>사용자: <span id="roleLabel"></span></small>
        </div>
    </header>

    <main>
        <section class="card">
            <h2>일매출 등록</h2>
            <form id="salesForm" class="grid-form">
                <input type="date" id="saleDate" required>
                <select id="saleLocation">
                    <option>클럽하우스</option>
                    <option>스타트하우스</option>
                    <option>동그늘집</option>
                    <option>서그늘집</option>
                </select>
                <input type="number" id="saleAmount" placeholder="매출액" required>
                <textarea id="saleMemo" placeholder="메모 (선택)" class="full"></textarea>
                <custom-button type="submit" class="full" label="매출 저장"></custom-button>
            </form>
            <div class="actions" style="margin-top: 16px;">
                 <custom-button id="closeDay" label="선택 날짜 마감" variant="danger"></custom-button>
            </div>
        </section>

        <section class="card">
            <h2>일매출 현황</h2>
            <p>최근 등록된 매출 내역입니다. 마감된 날짜의 데이터는 관리자만 삭제할 수 있습니다.</p>
            <div class="table-scroll">
                <table>
                    <thead>
                        <tr>
                            <th>날짜</th>
                            <th>구분</th>
                            <th class="right">금액</th>
                            <th>메모</th>
                            <th>상태</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="dailyTable">
                        <!-- Data will be rendered here by ui.js -->
                    </tbody>
                </table>
            </div>
        </section>

        <section class="card full">
            <h2>연간 매출 요약</h2>
            <div class="actions">
                <select id="yearFilter"></select>
            </div>
            <div class="summary-grid">
                <div class="summary-card">
                    <span>총 매출</span>
                    <strong id="yearTotal">0</strong>
                </div>
                <div class="summary-card" style="border-color: var(--success);">
                    <span>마감 매출</span>
                    <strong id="closedTotal">0</strong>
                </div>
                <div class="summary-card" style="border-color: var(--danger);">
                    <span>미마감 매출</span>
                    <strong id="openTotal">0</strong>
                </div>
            </div>
            <div class="table-scroll">
                <table>
                    <thead>
                        <tr>
                            <th>구분</th>
                            <th class="right">총 매출</th>
                            <th class="right">마감 매출</th>
                            <th class="right">미마감 매출</th>
                        </tr>
                    </thead>
                    <tbody id="yearlyTable">
                        <!-- Data will be rendered here by ui.js -->
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <p>
            Built by <a href="https://github.com/yorungyi" target="_blank">yorungyi</a>. 
            View the source code on <a href="https://github.com/yorungyi/PRODUCT-BUILDER-challenge" target="_blank">GitHub</a>.
        </p>
    </footer>

    <dialog id="logDialog">
        <div class="dialog-form">
            <h3>최근 변경 기록 (15개)</h3>
            <ul id="auditLog"></ul>
            <form method="dialog">
                <custom-button label="닫기" variant="secondary" style="margin-top: 16px;"></custom-button>
            </form>
        </div>
    </dialog>
</body>
</html>